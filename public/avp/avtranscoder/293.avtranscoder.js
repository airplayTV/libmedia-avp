"use strict";(self.webpackChunkAVTranscoder=self.webpackChunkAVTranscoder||[]).push([[293],{29293:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var i=r(134),c=r(63939),s=r(51597),a=r(4624),A=r(95335),o=r(53260),n=r(14686),d=r(95644),u=r(31658),p=r(77231),h=r(44328);const I="src\\avformat\\formats\\OWavFormat.ts",P={forceRF64:!1};class D extends s.A{constructor(e={}){super(),(0,i.A)(this,"type",16),(0,i.A)(this,"options",void 0),(0,i.A)(this,"minPts",void 0),(0,i.A)(this,"maxPts",void 0),(0,i.A)(this,"lastDuration",void 0),(0,i.A)(this,"sampleCount",void 0),(0,i.A)(this,"dataPos",void 0),(0,i.A)(this,"dsPos",void 0),this.options=A.X$({},P,e)}init(e){return e.ioWriter.setEndian(!1),this.maxPts=BigInt(0),this.minPts=BigInt.asIntN(64,p.mN),this.sampleCount=BigInt(0),this.lastDuration=BigInt(0),this.dataPos=-BigInt(1),this.dsPos=-BigInt(1),0}writeHeader(e){const t=e.getStreamByMediaType(1);if(!t.codecpar.codecTag||t.codecpar.codecTag>65535){let e=65534;65557===t.codecpar.codecId||65559===t.codecpar.codecId?e=3:65541===t.codecpar.codecId||65536===t.codecpar.codecId||65548===t.codecpar.codecId||65544===t.codecpar.codecId||65567===t.codecpar.codecId?e=1:A.__(o.gi,((r,i)=>{r===t.codecpar.codecId&&(e=+i)})),t.codecpar.codecTag=e}return t.codecpar.bitsPerCodedSample||(t.codecpar.bitsPerCodedSample=d.MZ(t.codecpar.codecId)),t.codecpar.blockAlign||(t.codecpar.blockAlign=t.codecpar.bitsPerCodedSample*t.codecpar.chLayout.nbChannels/(0,u.A)(8,t.codecpar.bitsPerCodedSample)),e.ioWriter.writeString("RIFF"),e.ioWriter.writeUint32(-1),e.ioWriter.writeString("WAVE"),this.dsPos=e.ioWriter.getPos(),e.ioWriter.writeString("JUNK"),e.ioWriter.writeUint32(28),e.ioWriter.writeUint64(BigInt(0)),e.ioWriter.writeUint64(BigInt(0)),e.ioWriter.writeUint64(BigInt(0)),e.ioWriter.writeUint32(0),e.ioWriter.writeString("fmt "),e.ioWriter.writeUint32(16),e.ioWriter.writeUint16(t.codecpar.codecTag),e.ioWriter.writeUint16(t.codecpar.chLayout.nbChannels),e.ioWriter.writeUint32(t.codecpar.sampleRate),e.ioWriter.writeUint32(Number(BigInt.asUintN(32,t.codecpar.bitrate/BigInt(8)))),e.ioWriter.writeUint16(t.codecpar.blockAlign),e.ioWriter.writeUint16(t.codecpar.bitsPerCodedSample),this.dataPos=e.ioWriter.getPos(),e.ioWriter.writeString("data"),e.ioWriter.writeUint32(-1),0}writeAVPacket(e,t){if(!c.f[15](t+28))return void a.R8(`packet's size is 0: ${c.f[15](t+32)}, ignore it`,I,149);const r=e.getStreamByIndex(c.f[15](t+32));if(r){if(1===r.codecpar.codecType)return e.ioWriter.writeBuffer((0,n.s3)(c.f[20](t+24),c.f[15](t+28))),c.f[17](t+8)<this.minPts&&(this.minPts=c.f[17](t+8)),c.f[17](t+8)>this.maxPts&&(this.maxPts=c.f[17](t+8)),c.f[17](t+48)!==p.Dh&&(this.lastDuration=c.f[17](t+48)),65557!==r.codecpar.codecId&&65559!==r.codecpar.codecId&&65541!==r.codecpar.codecId&&65536!==r.codecpar.codecId&&65548!==r.codecpar.codecId&&65544!==r.codecpar.codecId&&65567!==r.codecpar.codecId||(this.sampleCount+=BigInt(0|Math.floor(c.f[15](t+28)/(r.codecpar.chLayout.nbChannels*r.codecpar.bitsPerCodedSample/8)))),0;a.R8(`packet's type is not audio: ${c.f[15](t+32)}, ignore it`,I,161)}else a.R8(`can not found the stream width the packet's streamIndex: ${c.f[15](t+32)}, ignore it`,I,156)}writeTrailer(e){e.ioWriter.flush();const t=e.getStreamByMediaType(1),r=e.ioWriter.getPos(),i=r-this.dataPos-BigInt(8);let c=!1;if(this.options.forceRF64||r-BigInt(8)>BigInt(p.f7)?c=!0:(e.ioWriter.seek(BigInt(4)),e.ioWriter.writeUint32(Number(BigInt.asUintN(32,r-BigInt(8)))),e.ioWriter.seek(this.dataPos+BigInt(4)),e.ioWriter.writeUint32(Number(BigInt.asUintN(32,i))),e.ioWriter.seek(r)),c){let c=this.sampleCount;this.sampleCount||(c=(0,h.k)(this.maxPts-this.minPts+this.lastDuration,t.timeBase,{num:1,den:t.codecpar.sampleRate})),e.ioWriter.seek(BigInt(0)),e.ioWriter.writeString("RF64"),e.ioWriter.writeUint32(-1),e.ioWriter.seek(this.dsPos),e.ioWriter.writeString("ds64"),e.ioWriter.writeUint32(28),e.ioWriter.writeUint64(r-BigInt(8)),e.ioWriter.writeUint64(i),e.ioWriter.writeUint64(c),e.ioWriter.writeUint32(0),e.ioWriter.seek(r)}return 0}flush(e){return e.ioWriter.flush(),0}}},53260:(e,t,r)=>{r.d(t,{IC:()=>A,dd:()=>a,gi:()=>c,mO:()=>o,nz:()=>s,t6:()=>n});var i=r(79682);const c={1:65541,2:69638,3:65557,6:65543,7:65542,10:86052,16:69664,17:69633,23:69664,32:69646,34:86037,49:86046,50:86046,56:73728,66:86068,69:69643,20:69643,64:69643,80:86016,85:86017,87:73728,88:73729,97:69635,98:69634,100:69643,105:69633,117:86079,131:86069,255:86018,273:86068,304:86057,309:86106,352:86023,353:86024,354:86053,355:86054,357:86095,358:86096,384:86116,512:69644,533:86022,534:86022,624:86047,654:86111,655:69660,848:86114,1025:86043,1026:86074,1280:86081,1281:86081,5376:86046,5377:86037,5632:86018,5634:86065,8192:86019,8193:86020,8264:86085,8738:86069,27765:65542,28781:86018,16707:86018,16768:86116,22858:81922,29338:86069,33152:86116,41216:86068,41222:86018,41225:86051,61868:86028,65534:86112,21318:69645,22127:86021},s={[(0,i.A)("H261")]:3,[(0,i.A)("H263")]:4,[(0,i.A)("X263")]:4,[(0,i.A)("T263")]:4,[(0,i.A)("L263")]:4,[(0,i.A)("VX1K")]:4,[(0,i.A)("ZyGo")]:4,[(0,i.A)("M263")]:4,[(0,i.A)("lsvm")]:4,[(0,i.A)("I263")]:20,[(0,i.A)("U263")]:4,[(0,i.A)("VSM4")]:4,[(0,i.A)("H264")]:27,[(0,i.A)("h264")]:27,[(0,i.A)("X264")]:27,[(0,i.A)("x264")]:27,[(0,i.A)("avc1")]:27,[(0,i.A)("DAVC")]:27,[(0,i.A)("SMV2")]:27,[(0,i.A)("VSSH")]:27,[(0,i.A)("Q264")]:27,[(0,i.A)("V264")]:27,[(0,i.A)("GAVC")]:27,[(0,i.A)("UMSV")]:27,[(0,i.A)("tshd")]:27,[(0,i.A)("INMC")]:27,[(0,i.A)("FMP4")]:12,[(0,i.A)("DIVX")]:12,[(0,i.A)("DX50")]:12,[(0,i.A)("XVID")]:12,[(0,i.A)("MP4S")]:12,[(0,i.A)("M4S2")]:12,[(0,i.A)("DIVX")]:12,4:12,[(0,i.A)("ZMP4")]:12,[(0,i.A)("DIV1")]:12,[(0,i.A)("BLZ0")]:12,[(0,i.A)("mp4v")]:12,[(0,i.A)("UMP4")]:12,[(0,i.A)("WV1F")]:12,[(0,i.A)("SEDG")]:12,[(0,i.A)("RMP4")]:12,[(0,i.A)("3IV2")]:12,[(0,i.A)("WAWV")]:12,[(0,i.A)("FFDS")]:12,[(0,i.A)("FVFW")]:12,[(0,i.A)("DCOD")]:12,[(0,i.A)("MVXM")]:12,[(0,i.A)("PM4V")]:12,[(0,i.A)("SMP4")]:12,[(0,i.A)("DXGM")]:12,[(0,i.A)("VIDM")]:12,[(0,i.A)("M4T3")]:12,[(0,i.A)("GEOX")]:12,[(0,i.A)("G264")]:12,[(0,i.A)("HDX4")]:12,[(0,i.A)("DM4V")]:12,[(0,i.A)("DMK2")]:12,[(0,i.A)("DYM4")]:12,[(0,i.A)("DIGI")]:12,[(0,i.A)("EPHV")]:12,[(0,i.A)("EM4A")]:12,[(0,i.A)("M4CC")]:12,[(0,i.A)("SN40")]:12,[(0,i.A)("VSPX")]:12,[(0,i.A)("ULDX")]:12,[(0,i.A)("GEOV")]:12,[(0,i.A)("SIPP")]:12,[(0,i.A)("SM4V")]:12,[(0,i.A)("XVIX")]:12,[(0,i.A)("DreX")]:12,[(0,i.A)("QMP4")]:12,[(0,i.A)("PLV1")]:12,[(0,i.A)("GLV4")]:12,[(0,i.A)("GMP4")]:12,[(0,i.A)("MNM4")]:12,[(0,i.A)("GTM4")]:12,[(0,i.A)("MPG4")]:14,[(0,i.A)("MP41")]:14,[(0,i.A)("MP42")]:15,[(0,i.A)("DIV2")]:15,[(0,i.A)("MP43")]:16,[(0,i.A)("DIV3")]:16,[(0,i.A)("MPG3")]:16,[(0,i.A)("DIV5")]:16,[(0,i.A)("DIV6")]:16,[(0,i.A)("DIV4")]:16,[(0,i.A)("DVX3")]:16,[(0,i.A)("AP41")]:16,[(0,i.A)("COL1")]:16,[(0,i.A)("COL0")]:16,[(0,i.A)("WMV1")]:17,[(0,i.A)("WMV2")]:18,[(0,i.A)("GXVE")]:18,[(0,i.A)("dvsd")]:24,[(0,i.A)("dvhd")]:24,[(0,i.A)("dvh1")]:24,[(0,i.A)("dvsl")]:24,[(0,i.A)("dv25")]:24,[(0,i.A)("dv50")]:24,[(0,i.A)("cdvc")]:24,[(0,i.A)("CDVH")]:24,[(0,i.A)("CDV5")]:24,[(0,i.A)("dvc ")]:24,[(0,i.A)("dvcs")]:24,[(0,i.A)("dvh1")]:24,[(0,i.A)("dvis")]:24,[(0,i.A)("pdvc")]:24,[(0,i.A)("SL25")]:24,[(0,i.A)("SLDV")]:24,[(0,i.A)("AVd1")]:24,[(0,i.A)("mpg1")]:2,[(0,i.A)("mpg2")]:2,[(0,i.A)("MPEG")]:2,[(0,i.A)("PIM1")]:2,[(0,i.A)("PIM2")]:2,[(0,i.A)("VCR2")]:2,268435457:2,268435458:2,268435460:2,[(0,i.A)("DVR ")]:2,[(0,i.A)("MMES")]:2,[(0,i.A)("LMP2")]:2,[(0,i.A)("slif")]:2,[(0,i.A)("EM2V")]:2,[(0,i.A)("M701")]:2,[(0,i.A)("M702")]:2,[(0,i.A)("M703")]:2,[(0,i.A)("M704")]:2,[(0,i.A)("M705")]:2,[(0,i.A)("mpgv")]:2,[(0,i.A)("BW10")]:2,[(0,i.A)("XMPG")]:2,[(0,i.A)("MJPG")]:7,[(0,i.A)("RV40")]:69,[(0,i.A)("AV01")]:225,[(0,i.A)("VP80")]:139,[(0,i.A)("VP90")]:167,[(0,i.A)("HEVC")]:173,[(0,i.A)("H265")]:173},a="00001000800000AA00389B71",A="2107D3118644C8C1CA000000",o="0000000000001000800000AA",n={"2C806DE046DBCF11B4D100805F6CBBEA":86019,BFAA23E958CB7144A119FFFA01E4CE62:86055,D242E147BA368D4D88FC61654F8C836C:86104,AF87FBA7022DFB42A4D405CD93843BDD:86056,"2B806DE046DBCF11B4D100805F6CBBEA":86016,"82EC1F6ACADB1945BDE756D3B3EF981D":69673,"3AC1FA38811D4361A40DCE53CA607CD1":86112}},79682:(e,t,r)=>{r.d(t,{A:()=>s});var i=r(4624);const c="src\\avformat\\function\\mktagle.ts";function s(e){4!==e.length&&i.R8(`tag length is not 4, tag: ${e}`,c,30);let t=0;for(let r=3;r>=0;r--)t=t<<8|e.charCodeAt(r);return t}},95644:(e,t,r)=>{function i(e,t,r,i){if(e<=0||e>64)return 0;if(t)switch(e){case 32:return r?65556:65557;case 64:return r?65558:65559;default:return 0}else if(e+=7,i&1<<(e>>>=3)-1)switch(e){case 1:return 65540;case 2:return r?65537:65536;case 3:return r?65549:65548;case 4:return r?65545:65544;case 8:return r?65568:65567;default:return 0}else switch(e){case 1:return 65541;case 2:return r?65539:65538;case 3:return r?65551:65550;case 4:return r?65547:65546;default:return 0}}function c(e){switch(e){case 69649:return 2;case 69648:return 3;case 69647:case 69633:case 69632:case 69645:case 69638:return 4;default:return function(e){switch(e){case 86070:case 86071:case 69674:case 69644:case 69678:case 69651:case 69661:case 69677:case 69655:case 69664:case 69636:case 69675:case 69660:case 69646:case 69670:return 4;case 86089:case 86090:case 86091:case 86092:case 65543:case 65542:case 65571:case 65540:case 65563:case 65572:case 65541:case 81924:case 81926:return 8;case 65537:case 65566:case 65536:case 65554:case 65539:case 65538:return 16;case 65552:case 65549:case 65548:case 65564:case 65551:case 65550:return 24;case 65545:case 65544:case 65565:case 65547:case 65546:case 65556:case 65557:case 65570:case 65569:return 32;case 65558:case 65559:case 65568:case 65567:return 64;default:return 0}}(e)}}r.d(t,{MZ:()=>c,uU:()=>i})}}]);