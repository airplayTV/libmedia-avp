"use strict";(self.webpackChunkAVPlayer=self.webpackChunkAVPlayer||[]).push([[171],{58121:(t,i,e)=>{e.d(i,{A:()=>s});var a=e(134);class s{constructor(){(0,a.A)(this,"signature",void 0),(0,a.A)(this,"version",void 0),(0,a.A)(this,"flags",void 0),(0,a.A)(this,"dataOffset",void 0),(0,a.A)(this,"hasVideo",void 0),(0,a.A)(this,"hasAudio",void 0),this.signature="FLV",this.version=1,this.flags=0,this.dataOffset=9,this.hasAudio=!1,this.hasVideo=!1}async read(t){this.signature=await t.readString(3),this.version=await t.readUint8(),this.flags=await t.readUint8(),this.dataOffset=await t.readUint32(),this.hasAudio=!!(4&this.flags),this.hasVideo=!!(1&this.flags)}write(t){this.flags=0,this.hasAudio&&(this.flags|=4),this.hasVideo&&(this.flags|=1),t.writeString(this.signature),t.writeUint8(this.version),t.writeUint8(this.flags),t.writeUint32(this.dataOffset)}}},68243:(t,i,e)=>{e.d(i,{A:()=>l});var a=e(134),s=e(35336),n=e(92647),r=e(4624),o=e(94889),h=e(9705),w=e(73040);class l{constructor(){(0,a.A)(this,"onMetaData",void 0),this.onMetaData={canSeekToEnd:!1}}async read(t,i){const e=t.getPos(),a=e+BigInt(Math.floor(i)),s=await(0,w.$x)(t,a),n=await(0,w.$x)(t,a);this[s]=n,a>t.getPos()&&await t.skip(Number(BigInt.asIntN(32,a-t.getPos())));const o=Number(t.getPos()-e),l=await t.readUint32();return o+11!==l?(r.R8(`script size not match, size: ${o+11}, previousTagSize: ${l}`,"src\\avformat\\formats\\flv\\FlvScriptTag.ts",63),h.LR):0}computeSize(){const t=[],i=new s.A;return i.onFlush=i=>(t.push(i.slice()),0),(0,w.bD)(i,"onMetaData"),(0,w.bD)(i,this.onMetaData),i.flush(),(0,n.A)(Uint8Array,t).length}write(t){if(this.onMetaData){const i=[],e=new s.A;e.onFlush=t=>(i.push(t.slice()),0),(0,w.bD)(e,"onMetaData"),(0,w.bD)(e,this.onMetaData),e.flush();const a=(0,n.A)(Uint8Array,i);o.M5(t,18,BigInt(0),void 0,a)}}dts2Position(t){if(this.canSeek()){let i=-1;const e=this.onMetaData.keyframes.times,a=this.onMetaData.keyframes.filepositions;let s;for(s=0;s<e.length;s++){if(e[s]===t){i=s;break}if(e[s]>t){i=Math.max(s-1,0);break}}return s&&s===e.length&&(i=e.length-1),{pos:a[i],dts:e[i]}}return{pos:-1,dts:-1}}position2DTS(t){if(this.canSeek()){let e=-1;const a=this.onMetaData.keyframes.times,s=this.onMetaData.keyframes.filepositions;let n=0;for(n=0;n<s.length;n++)if(s[n]>t){e=n;break}var i;return n===s.length?null!==(i=this.onMetaData.duration)&&void 0!==i?i:a[a.length-1]:a[e]}return-1}canSeek(){return!!(this.onMetaData.keyframes&&this.onMetaData.keyframes.filepositions&&this.onMetaData.keyframes.filepositions.length)}}},35028:(t,i,e)=>{e.d(i,{FJ:()=>a,U5:()=>s});const a={10:86018,2:86017,11:86051,1:69645,4:86049,5:86049,6:86049,7:65543,8:65542},s={7:27,12:173,9:12,2:4,3:86,4:92,5:106,6:131}},94889:(t,i,e)=>{e.d(i,{M5:()=>n}),e(35028),e(44328),e(77231),e(65977);var a=e(67672);function s(t,i,e){const a=t.getPos(),s=t.getPointer(),n=a-BigInt(Math.floor(s));i<a&&i>=n?(t.seekInline(s+Number(i-a)),t.writeUint24(e),t.seekInline(s)):(t.seek(i),t.writeUint24(e),t.seek(a))}function n(t,i,e,n,r,o){t.flush(),t.writeUint8(i);const h=t.getPos();t.writeUint24(0),t.writeUint24(Number(e&BigInt(16777215))),t.writeUint8(Number(e>>BigInt(24)&BigInt(255))),t.writeUint24(0);const w=t.getPos();n&&n(t),a.Pc(r)?(r(t),s(t,h,Number(t.getPos()-w))):r&&(s(t,h,r.length+Number(t.getPos()-w)),t.writeBuffer(r));const l=Number(t.getPos()-h)+1;o&&o(l),t.writeUint32(l)}},73040:(t,i,e)=>{e.d(i,{$x:()=>o,bD:()=>h});var a=e(67672),s=e(72739),n=e(95335);async function r(t,i){return{key:await t.readString(await t.readUint16()),value:await o(t,i)}}async function o(t,i){let e;switch(await t.readUint8()){case 0:e=await t.readDouble();break;case 1:e=!!await t.readUint8();break;case 2:e=await t.readString(await t.readUint16());break;case 3:for(e={};t.getPos()<i;){const{key:a,value:s}=await r(t,i);if(e[a]=s,9==(16777215&await t.peekUint24())){await t.skip(3);break}}break;case 8:for(e={},await t.skip(4);t.getPos()<i;){const{key:a,value:s}=await r(t,i);if(e[a]=s,9==(16777215&await t.peekUint24())){await t.skip(3);break}}break;case 9:case 5:e=null;break;case 10:e=[];const a=await t.readUint32();for(let s=0;s<a;s++)e.push(await o(t,i));break;case 11:const s=await t.readDouble(),n=await t.readInt16();e=new Date(s+60*n*1e3);break;case 12:e=await t.readString(await t.readUint32())}return e}function h(t,i){a.ai(i)?(t.writeUint8(0),t.writeDouble(i)):a.o(i)?(t.writeUint8(0),t.writeDouble(Number(i))):a.zM(i)?(t.writeUint8(1),t.writeUint8(i?1:0)):a.Yj(i)?i.length>=65536?(t.writeUint8(12),t.writeUint32(i.length),t.writeString(i)):(t.writeUint8(2),t.writeUint16(i.length),t.writeString(i)):a.YO(i)?(t.writeUint8(10),t.writeUint32(i.length),s.__(i,(i=>{h(t,i)}))):a.Ik(i)?(t.writeUint8(3),n.__(i,((i,e)=>{t.writeUint16(e.length),t.writeString(e),h(t,i)})),t.writeUint24(9)):i instanceof Date?(t.writeUint8(11),t.writeDouble(i.getTime()),t.writeInt16(0)):null==i&&t.writeUint8(5)}}}]);